<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">

<dom-module id="teacher-query">
 <template>
   <paper-input label="token" value="{{token}}"></paper-input>
   <paper-button on-click="click" raised>Click</paper-button>
   <iron-ajax  
     id="getAjax"
     method="GET"
     handle-as="json"
     on-response="_handleResponse">
   </iron-ajax>
 </template>

 <script>
   class TeacherQuery extends Polymer.Element {
     static get is() {
       return 'teacher-query';
     }
    
     static get properties() {
       return {
         docId:{
           type:String,
           notify:true
         },
         token:{
           type:String
         },
         document:{
           type:Object,
           notify:true
         }
       }
     }

     _handleResponse(event) {
       this.set('document',event.detail.response);
     }
     
     click() {
       this.$.getAjax.url = 'https://maas.nuqlis.com:9000/api/dbs/teacher_db/'+this.docId;
       this.$.getAjax.headers = {
         'Authorization':'JWT '+this.token
       };
       this.$.getAjax.generateRequest();
     }
   }
   
   customElements.define(TeacherQuery.is,TeacherQuery);
 </script>
</dom-module>
